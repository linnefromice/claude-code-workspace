# CLAUDE.local.md

## Task File Execution Rule / タスクファイル実行ルール

When a user inputs "do @filepath" (e.g., "do @0_task_79.md"), treat the contents of the specified file as task execution instructions. Read the file and execute the tasks described within it.

### 使用方法

ユーザーが `do @ファイルパス` と入力した場合（例: `do @.ai/tasks/prompts/api-review.md`）：

1. 指定されたファイルを読み込む
2. ファイルの内容をタスク実行指示として解釈する
3. 記載された指示に従ってタスクを実行する

### 例

```
do @.ai/tasks/prompts/code-review.md
do @.ai/tasks/design/20260120-feature-spec.md
```

## ドキュメント配置ルール

### タスクファイル作成ルール

1. **フォルダ構成**
   - `.ai/tasks/records/` - 一時的な調査結果のダンプ（**基本的にここへの配置**）
   - `.ai/tasks/design/` - 設計情報など複数回の対話を跨いで進めるべき要件や設計情報
   - `.ai/tasks/todos/` - todolist に当たるもの
   - `.ai/tasks/prompts/` - 再利用可能なプロンプトテンプレート

2. **ファイル命名規則**
   - `YYYYMMDDHHmmss-(タスク名).md` の形式で作成
   - タイムスタンプは作業開始日時（JST）を使用
   - 例: `.ai/tasks/records/20260109143052-api-investigation.md`
   - 例: `.ai/tasks/design/20260115100000-new-feature-spec.md`
   - 例: `.ai/tasks/todos/20260120090000-refactoring-tasks.md`

3. **タイムスタンプフォーマット**
   - `YYYY`: 年（4桁）
   - `MM`: 月（2桁、ゼロ埋め）
   - `DD`: 日（2桁、ゼロ埋め）
   - `HH`: 時（2桁、24時間表記、ゼロ埋め）
   - `mm`: 分（2桁、ゼロ埋め）
   - `ss`: 秒（2桁、ゼロ埋め）

4. **タスクファイル管理**
   - タスク完了後もファイルは削除せず、履歴として残す
   - 必要に応じて `.ai/README.md` でアーカイブリストを管理

5. **命名の一貫性**
   - `(タスク名)` は kebab-case を使用
   - 関連する複数ファイルは同じタイムスタンプ・タイトルを使用

### フォルダ別ファイル作成ガイドライン

#### `.ai/tasks/design/` - 設計ドキュメント

**作成トリガー**: ユーザーから以下のような依頼があった場合
- 「実装方針を考えて」「設計して」
- 「アーキテクチャを検討して」
- 「要件を整理して」「仕様をまとめて」
- 複数回の対話を跨いで進める必要がある設計・要件定義

**ファイル内容**:
- 要件の整理
- 実装方針・アーキテクチャ設計
- 技術的な判断とその理由
- 影響範囲の分析
- 未決定事項・検討事項

#### `.ai/tasks/todos/` - タスクリスト

**作成トリガー**: ユーザーから以下のような依頼があった場合
- 「タスクリストを作って」「TODO を整理して」
- 「やるべきことをリストアップして」
- 「作業項目を洗い出して」

**ファイル内容**:
- チェックボックス形式のタスクリスト（`- [ ]`）
- 優先度や依存関係がある場合はその情報
- 各タスクの簡潔な説明

#### `.ai/tasks/records/` - 調査記録（デフォルト）

**作成トリガー**: 上記以外の一時的な調査・分析結果
- コード調査の結果
- エラー分析
- 既存実装の確認結果
- その他一時的なメモ

#### `.ai/tasks/prompts/` - プロンプトテンプレート

**作成トリガー**: ユーザーから以下のような依頼があった場合
- 「プロンプトを保存して」「プロンプトを作って」
- 繰り返し使用するタスク指示をテンプレート化したい場合

**ファイル内容**:
- 再利用可能なプロンプトテンプレート
- 特定のタスクを実行するための指示セット
- ワークフローの定義

---

## Git 操作時の除外ルール

**重要**: `.ai/` ディレクトリは絶対に git にコミットしないでください。

- `.ai/` はローカル専用のタスク管理ディレクトリです
- `.gitignore` には追加できないため、git 操作時に手動で追加しないように考慮する必要があります
